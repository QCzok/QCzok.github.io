(this["webpackJsonpsound-track-box"]=this["webpackJsonpsound-track-box"]||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(25),c=n.n(s),o=(n(80),n(35)),i=n(16),l=n(72),u=n.n(l),d="https://soundtrackbox.herokuapp.com",j="login_access_token",h=n(15),b=n.n(h),m=n(26),p=n(28),f=n.n(p),g=function(){var e=Object(m.a)(b.a.mark((function e(t,n,a,r){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new FormData).append("playlistName",t),s.append("playlistID",n),s.append("songName",a),s.append("track",r),e.abrupt("return",f.a.post(d+"/media/addSong",s,{headers:{"auth-token":localStorage.getItem(j)}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.delete(d+"/media/deleteSong",{headers:{"auth-token":localStorage.getItem(j),playlistID:t,songID:n}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post(d+"/media/addPlaylist",{name:t},{headers:{"auth-token":localStorage.getItem(j)}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.delete(d+"/media/deletePlaylist",{headers:{"auth-token":localStorage.getItem(j),playlistID:t}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.get(d+"/media/loadMusicCollection",{headers:{"auth-token":localStorage.getItem(j)}}).then((function(e){return e.data})).catch((function(e){console.log(e)})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post(d+"/user/register",t).then((function(e){return 200===e.status?{isOk:!0,message:""}:{isOk:!1,message:e.data}})).catch((function(e){return{isOk:!1,message:e.response.data}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post(d+"/user/login",t).then((function(e){return e})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.delete(d+"/user/deleteUser",{headers:{"auth-token":localStorage.getItem(j)}}).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=n(31),k=n(1),I=Object(i.f)((function(e){return Object(k.jsxs)("nav",{className:"navbar text-white bg-dark flex-fill",children:[Object(k.jsxs)("div",{className:"nav-item dropdown",children:[Object(k.jsx)("a",{className:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:localStorage.getItem(j)?"orange":"currentColor",className:"bi bi-file-person-fill",viewBox:"0 0 16 16",children:Object(k.jsx)("path",{d:"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-1 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 4c2.623 0 4.146.826 5 1.755V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-1.245C3.854 11.825 5.377 11 8 11z"})})}),Object(k.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:[Object(k.jsx)("a",{className:"dropdown-item",onClick:function(){localStorage.getItem(j)?(localStorage.removeItem(j),e.history.push("/")):e.history.push("/login")},children:localStorage.getItem(j)?"Logout":"Login"}),Object(k.jsx)("a",{className:localStorage.getItem(j)?"dropdown-item":"",onClick:function(){Promise.resolve(S(e.playlistID)).then((function(){localStorage.removeItem(j);var e=new C.a;e.remove("songName",{path:"/",secure:!0}),e.remove("songID",{path:"/",secure:!0}),window.location.reload()}))},href:"#",children:localStorage.getItem(j)?"Delete account":""})]})]}),Object(k.jsx)("h5",{children:"Sound Track Box"})]})})),D=n(12),M=n(8),P=n(14),A=n(17),L=n(32);var z=Object(i.f)((function(e){var t=Object(a.useState)({email:"",password:"",successMessage:null,errorMessage:null}),n=Object(P.a)(t,2),r=n[0],s=n[1],c=function(e){var t=e.target,n=t.id,a=t.value;s((function(e){return Object(M.a)(Object(M.a)({},e),{},Object(D.a)({},n,a))}))},o=function(e){e.preventDefault();var t={email:r.email,password:r.password};Promise.resolve(N(t)).then((function(e){e.status<400?(s((function(e){return Object(M.a)(Object(M.a)({},e),{},{successMessage:"Login successful. Redirecting to home page.."})})),localStorage.setItem(j,e.data),i()):s((function(t){return Object(M.a)(Object(M.a)({},t),{},{errorMessage:e.data})}))})).catch((function(e){e.response?s((function(t){return Object(M.a)(Object(M.a)({},t),{},{errorMessage:e.response.data})})):alert("NETWORK ERROR")}))},i=function(){e.history.push("/")};return Object(k.jsxs)(A.a,{show:!0,onHide:function(){return i()},animation:!1,children:[Object(k.jsx)(A.a.Header,{closeButton:!0,children:"Login"}),Object(k.jsxs)(A.a.Body,{children:[Object(k.jsxs)("form",{onSubmit:o,children:[Object(k.jsxs)("div",{className:"form-group text-left",children:[Object(k.jsx)("label",{children:"Email address"}),Object(k.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:r.email,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group text-left",children:[Object(k.jsx)("label",{children:"Password"}),Object(k.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:r.password,onChange:c})]}),Object(k.jsx)("div",{className:"form-check"})]}),Object(k.jsx)(L.a,{type:"submit",className:"btn btn-primary",onClick:o,children:"Submit"})]}),Object(k.jsxs)(A.a.Footer,{children:[Object(k.jsxs)("section",{className:"registerMessage",children:[Object(k.jsx)("span",{children:"Dont have an account? "}),Object(k.jsx)("button",{className:"btn btn-primary",onClick:function(){e.history.push("/register")},children:"Register"})]}),Object(k.jsx)("section",{className:r.errorMessage?"alert alert-danger":"",role:"alert",children:r.errorMessage})]})]})})),B=Object(i.f)((function(e){var t=Object(a.useState)({email:"",password:"",confirmPassword:"",errorMessage:null,successMessage:null,onSend:!1}),n=Object(P.a)(t,2),r=n[0],s=n[1],c=function(e){var t=e.target,n=t.id,a=t.value;s((function(e){return Object(M.a)(Object(M.a)({},e),{},Object(D.a)({},n,a))}))},o=function(){if(r.email.length&&r.password.length){var e={email:r.email,password:r.password};Promise.resolve(w(e)).then((function(e){e.isOk?s((function(e){return Object(M.a)(Object(M.a)({},e),{},{successMessage:"You have successfully registered. We just sent you a confirmation email. Check your email account to finish the registration process and access your free trial period. If you don't receive it in a few minutes, check your spam folder.",errorMessage:null})})):s((function(t){return Object(M.a)(Object(M.a)({},t),{},{errorMessage:e.message,successMessage:null,onSend:!1})}))}))}else s((function(e){return Object(M.a)(Object(M.a)({},e),{},{errorMessage:"Please enter valid username and password",successMessage:null})}))};return Object(k.jsx)("div",{children:Object(k.jsxs)(A.a,{show:!0,onHide:function(){e.history.push("/home")},animation:!1,children:[Object(k.jsx)(A.a.Header,{closeButton:!0,children:"Register"}),Object(k.jsx)(A.a.Body,{children:Object(k.jsxs)("form",{children:[Object(k.jsxs)("div",{className:"form-group text-left",children:[Object(k.jsx)("label",{children:"Email address"}),Object(k.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:r.email,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group text-left",children:[Object(k.jsx)("label",{children:"Password"}),Object(k.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:r.password,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group text-left",children:[Object(k.jsx)("label",{children:"Confirm Password"}),Object(k.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password",value:r.confirmPassword,onChange:c})]}),Object(k.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){e.preventDefault(),r.password===r.confirmPassword?(s((function(e){return Object(M.a)(Object(M.a)({},e),{},{onSend:!0})})),Promise.resolve().then(o).catch((function(e){return console.log(e)}))):s((function(e){return Object(M.a)(Object(M.a)({},e),{},{errorMessage:"Passwords do not match"})}))},disabled:r.onSend?"true":"",children:"Register"})]})}),Object(k.jsxs)(A.a.Footer,{children:[Object(k.jsxs)("div",{className:"mt-2",children:[Object(k.jsx)("span",{children:"Already have an account? "}),Object(k.jsx)("button",{className:"btn btn-primary",onClick:function(){e.history.push("/login")},children:"Login here"})]}),Object(k.jsx)("section",{className:r.errorMessage?"alert alert-danger":"",role:"alert",children:r.errorMessage}),Object(k.jsx)("section",{className:r.successMessage?"alert alert-success":"",role:"alert",children:r.successMessage})]})]})})})),F=(n(55),n(52)),H=n(62),E=function(e){var t=Object(a.useState)(!1),n=Object(P.a)(t,2),s=n[0],c=n[1],o=Object(a.useState)(""),i=Object(P.a)(o,2),l=i[0],u=i[1],d=Object(a.useState)(null),j=Object(P.a)(d,2),h=j[0],b=j[1],m=function(t){t.preventDefault(),""!==l?(e.parentCallback(l,h),c(!1),u("")):alert("You didn't give your song any name")};return Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)("a",{className:"dropdown-item",onClick:function(){c(!0)},children:"Add a song"}),Object(k.jsxs)(A.a,{show:s,onHide:function(){c(!1),u("")},animation:!1,children:[Object(k.jsx)(A.a.Header,{closeButton:!0,children:"Upload a Song"}),Object(k.jsx)(A.a.Body,{children:Object(k.jsxs)("form",{onSubmit:m,children:[Object(k.jsx)(H.a.Group,{children:Object(k.jsx)(H.a.File,{onChange:function(e){b(e.target.files[0])},accept:".mp3,audio/*"})}),Object(k.jsxs)("div",{className:"form-group text-left",children:[Object(k.jsx)("label",{children:"Song name"}),Object(k.jsx)("input",{type:"song-name",className:"form-control",id:"playlist","aria-describedby":"song name",placeholder:"Enter a song name",value:l,onChange:function(e){u(e.target.value)}})]})]})}),Object(k.jsx)(A.a.Footer,{children:Object(k.jsx)(L.a,{type:"submit",className:"btn btn-primary",onClick:m,children:"Submit"})})]})]})},T=function(e){return Object(k.jsxs)("div",{className:"row",children:[Object(k.jsxs)("div",{id:"delete-song",className:"nav-item dropdown",children:[Object(k.jsx)("a",{className:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-file-music-fill",viewBox:"0 0 16 16",children:Object(k.jsx)("path",{d:"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-.5 4.11v1.8l-2.5.5v5.09c0 .495-.301.883-.662 1.123C7.974 12.866 7.499 13 7 13c-.5 0-.974-.134-1.338-.377-.36-.24-.662-.628-.662-1.123s.301-.883.662-1.123C6.026 10.134 6.501 10 7 10c.356 0 .7.068 1 .196V4.41a1 1 0 0 1 .804-.98l1.5-.3a1 1 0 0 1 1.196.98z"})})}),Object(k.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:Object(k.jsx)("a",{className:"dropdown-item",onClick:function(){var t=new C.a;Promise.resolve(O(e.playlistID,e.songID)).then((function(t){return e.parentCallback(t)})),t.get("songID")===e.songID&&e.updateCurrentSong(void 0,void 0)},children:"Delete this song"})})]}),Object(k.jsx)("button",{className:"btn flex-fill",onClick:function(){e.updateCurrentSong(e.songName,e.songID)},children:e.songName})]})},R=function(e){var t,n=Object(a.useState)(!1),r=Object(P.a)(n,2),s=r[0],c=r[1];return Object(k.jsxs)(k.Fragment,{children:[s&&Object(k.jsx)("div",{className:"d-flex justify-content-center",children:Object(k.jsx)("div",{className:"spinner-border",role:"status",children:Object(k.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!s&&Object(k.jsxs)(F.a,{children:[Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("a",{className:"dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false",children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-collection-play-fill",viewBox:"0 0 16 16",children:Object(k.jsx)("path",{d:"M2.5 3.5a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-11zm2-2a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1h-7zM0 13a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V6a1.5 1.5 0 0 0-1.5-1.5h-13A1.5 1.5 0 0 0 0 6v7zm6.258-6.437a.5.5 0 0 1 .507.013l4 2.5a.5.5 0 0 1 0 .848l-4 2.5A.5.5 0 0 1 6 12V7a.5.5 0 0 1 .258-.437z"})})}),Object(k.jsxs)("div",{className:"dropdown-menu",children:[Object(k.jsx)(E,{id:"add-song",parentCallback:function(t,n){c(!0),Promise.resolve(g(e.playlistName,e.playlistID,t,n)).then((function(t){return e.parentCallback(t)})).then((function(){c(!1)}))}}),Object(k.jsx)("a",{className:"dropdown-item",onClick:function(){var t=new C.a;Promise.resolve(v(e.playlistID)).then((function(n){e.songCollection.map((function(n){n._id===t.get("songID")&&e.updateCurrentSong(void 0,void 0)})),e.parentCallback(n)}))},children:"Delete this playlist"})]}),Object(k.jsx)(F.a.Toggle,{className:"btn btn-dark flex-grow-1",as:L.a,eventKey:"0",children:e.playlistName})]}),(t=e.songCollection,t.map((function(t){return Object(k.jsx)(F.a.Collapse,{eventKey:"0",children:Object(k.jsx)(T,{playlistID:e.playlistID,playlistName:e.playlistName,songName:t.songName,songID:t._id,parentCallback:e.parentCallback,updateCurrentSong:e.updateCurrentSong})},t._id)})))]})]})},_=function(e){var t=Object(a.useState)(!1),n=Object(P.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),o=Object(P.a)(c,2),i=o[0],l=o[1],u=function(t){t.preventDefault(),""!==i?(e.parentCallback(i),s(!1),l("")):alert("Your didn't give your playlist any name")};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("button",{type:"button",className:"btn btn-outline-dark",onClick:function(){s(!0)},children:[Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",className:"bi bi-plus",viewBox:"0 0 16 16",children:Object(k.jsx)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})}),"Add a new playlist"]}),Object(k.jsxs)(A.a,{show:r,onHide:function(){s(!1),l("")},animation:!1,children:[Object(k.jsx)(A.a.Header,{closeButton:!0,children:"Add a playlist"}),Object(k.jsx)(A.a.Body,{children:Object(k.jsx)("form",{onSubmit:u,children:Object(k.jsxs)("div",{className:"form-group text-left",children:[Object(k.jsx)("label",{children:"Playlist"}),Object(k.jsx)("input",{type:"playlist",className:"form-control",id:"playlist","aria-describedby":"playlist",placeholder:"Enter playlist name",value:i,onChange:function(e){l(e.target.value)}})]})})}),Object(k.jsx)(A.a.Footer,{children:Object(k.jsx)(L.a,{type:"submit",className:"btn btn-primary",onClick:u,children:"Submit"})})]})]})},V=function(e){var t=Object(a.useState)({musicCollection:[]}),n=Object(P.a)(t,2),r=n[0],s=n[1];Object(a.useEffect)((function(){Promise.resolve(y()).then((function(e){s(e)}))}),[]);var c=function(e){s(e)};return Object(k.jsxs)("section",{id:"library",className:"flex-fill",children:[Object(k.jsx)(_,{parentCallback:function(e){Promise.resolve().then(x(e).then((function(e){s(e)})))}}),function(t){try{return t.musicCollection.map((function(t){return Object(k.jsx)("div",{className:"col-md-12",children:Object(k.jsx)(R,{playlistName:t.name,playlistID:t._id,songCollection:t.songList?t.songList:[],parentCallback:c,updateCurrentSong:e.updateCurrentSong})},t._id)}))}catch(n){return console.log(n),[]}}(r)]})},U=n(2),G=n(5),K=n(21),Y=n(3),q=n(4),W=n(61);var J=function(e){var t=Object(a.useRef)();return Object(k.jsxs)("mesh",{position:e.position,ref:t,scale:e.scale,children:[Object(k.jsx)("boxGeometry",{args:[1,2,3]}),Object(k.jsx)("meshStandardMaterial",{color:e.color})]})};var Q=function(e){return Object(k.jsxs)("mesh",{position:[0,0,0],rotation:[0,0,0],scale:e.volume,children:[Object(k.jsx)("sphereGeometry",{attach:"geometry",args:[1,64,64]}),Object(k.jsx)("meshStandardMaterial",{attach:"material",color:"white",transparent:!0,roughness:.1,metalness:.1})]})},X=Array.from(Array(32).keys()),Z=function(e,t,n){return(e-n)/(t-n)};function $(e){var t=e.brightness,n=e.color;return Object(k.jsx)("rectAreaLight",{width:3,height:3,intensity:t,color:n,position:[2,1,4],lookAt:[0,0,0],penumbra:2,castShadow:!0})}function ee(e){var t=e.brightness,n=e.color;return Object(k.jsx)("rectAreaLight",{width:2,height:2,intensity:t,color:n,position:[1,4,-2],rotation:[0,180,0],castShadow:!0})}function te(){return Object(k.jsxs)("mesh",{receiveShadow:!0,rotation:[5,0,0],position:[0,-1,0],children:[Object(k.jsx)("planeBufferGeometry",{attach:"geometry",args:[500,500]}),Object(k.jsx)("meshStandardMaterial",{attach:"material",color:"white"})]})}function ne(){return Object(k.jsxs)("mesh",{receiveShadow:!0,position:[0,-1,-5],children:[Object(k.jsx)("planeBufferGeometry",{attach:"geometry",args:[500,500]}),Object(k.jsx)("meshStandardMaterial",{attach:"material",color:"white"})]})}var ae=function(e,t,n,a){try{if(e)for(var r=e.width/t-1,s=0,c=0;c<t;c++){var o=2*(n[c]+140);a.fillStyle="chocolate",a.fillRect(s,e.height-o/2,r,o/2),s+=r+1}}catch(i){console.log(i)}},re=function(e,t,n,a){try{e&&c.a.render(Object(k.jsxs)(W.a,{id:"canvas",children:[Object(k.jsx)(te,{}),Object(k.jsx)(ne,{}),Object(k.jsx)($,{brightness:2.6,color:"#bdefff"}),Object(k.jsx)(ee,{brightness:54,color:"#fff"}),Object(k.jsx)("pointLight",{position:[10,10,10]}),X.map((function(e,t){return Object(k.jsx)(J,{position:[t/4,0,0],scale:Z(n[t],-40,40),color:"hotpink"},t)})),X.map((function(e,t){return Object(k.jsx)(J,{position:[-t/4,0,0],scale:Z(n[t],-40,40),color:"orange"},t)}))]}),document.getElementById("container"))}catch(r){console.log(r)}},se=function(e,t,n,a){try{var r=n.reduce((function(e,t){return e+t}),0)/t||0;e&&c.a.render(Object(k.jsxs)(W.a,{id:"canvas",children:[Object(k.jsx)(te,{}),Object(k.jsx)(ne,{}),Object(k.jsx)($,{brightness:2.6,color:"blue"}),Object(k.jsx)(ee,{brightness:54,color:"red"}),Object(k.jsx)("pointLight",{position:[10,10,10]}),Object(k.jsx)(Q,{volume:-.03*r})]}),document.getElementById("container"))}catch(s){console.log(s)}},ce=function(e,t,n,a,r){switch(e){case 1:ae(t,n,a,r);break;case 2:re(t,n,a,r);break;case 3:se(t,n,a,r);break;default:ae(t,n,a,r)}},oe=function(e){Object(Y.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).onAudioLoad=function(){try{a.setState({isPlaying:!0},(function(){if(!a.audioCtx||!a.analyserNode){a.audioCtx=new AudioContext;var e=document.getElementById("track"),t=a.audioCtx.createMediaElementSource(e);a.analyserNode=a.audioCtx.createAnalyser(),a.analyserNode.fftSize=32,a.bufferLength=a.analyserNode.frequencyBinCount,a.dataArray=new Float32Array(a.bufferLength),t.connect(a.analyserNode),a.analyserNode.connect(a.audioCtx.destination),a.onTimeUpdateHandler()}}))}catch(e){console.log(e)}},a.onTimeUpdateHandler=function(){try{requestAnimationFrame(a.onTimeUpdateHandler),a.state.isPlaying&&(a.analyserNode.getFloatFrequencyData(a.dataArray),a.canvasCtx.fillStyle="Gainsboro",a.canvasCtx.clearRect(0,0,a.canvas.width,a.canvas.height),ce(a.state.visualization,a.canvas,a.bufferLength,a.dataArray,a.canvasCtx))}catch(e){a.setState({isPlaying:!1}),console.log(e)}},a.state={open:!1,visualization:1,isPlaying:!1},a.analyserNode=void 0,a.dataArray=void 0,a.bufferLength=void 0,a.audioCtx=void 0,a.onTimeUpdateHandler=a.onTimeUpdateHandler.bind(Object(K.a)(a)),a.onAudioLoad=a.onAudioLoad.bind(Object(K.a)(a)),a}return Object(G.a)(n,[{key:"componentDidMount",value:function(){this.canvas=document.getElementById("visualizer"),this.canvasCtx=this.canvas.getContext("2d")}},{key:"render",value:function(){var e=this;return this.props.currentSongID?this.src=d+"/media/getSongFile?songID="+this.props.currentSongID:this.src="https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_700KB.mp3",Object(k.jsxs)("div",{id:"player",className:"card flex-fill",children:[Object(k.jsx)("canvas",{id:1===this.state.visualization?"visualizer":"novisualizer"}),this.state.visualization>1&&Object(k.jsx)("div",{id:"container"}),Object(k.jsx)("h5",{className:"card-title",children:this.props.currentSongName}),Object(k.jsxs)("audio",{onPlay:this.onAudioLoad,onPause:function(){e.setState({isPlaying:!1})},id:"track",controls:!0,crossOrigin:"anonymous",src:this.src,children:["Your browser does not support the",Object(k.jsx)("code",{children:"audio"})," element."]}),Object(k.jsx)("button",{onClick:function(){return e.setState({visualization:1})},children:"Visualization 1"}),Object(k.jsx)("button",{onClick:function(){return e.setState({visualization:2})},children:"Visualization 2"}),Object(k.jsx)("button",{onClick:function(){return e.setState({visualization:3})},children:"Visualization 3"})]})}}]),n}(r.a.Component);var ie=Object(i.f)((function(e){var t=new C.a,n=Object(a.useState)(t.get("songID")),r=Object(P.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(t.get("songName")),l=Object(P.a)(o,2),u=l[0],d=l[1],h=function(){e.history.push("/login")},b=function(){e.history.push("/register")},m=function(e,n){c(n),d(e),n?(t.set("songName",e,{path:"/",secure:!0}),t.set("songID",n,{path:"/",secure:!0})):(t.remove("songName",e,{path:"/",secure:!0}),t.remove("songID",n,{path:"/",secure:!0}))};return Object(k.jsx)(i.a,{render:function(){return localStorage.getItem(j)?Object(k.jsxs)("section",{children:[Object(k.jsx)("div",{className:"row justify-content-md-center bg-light",children:Object(k.jsx)(V,{updateCurrentSong:m})}),Object(k.jsx)("div",{className:"row justify-content-md-center bg-light",children:s&&Object(k.jsx)(oe,{currentSongName:u,currentSongID:s})})]}):Object(k.jsxs)("section",{children:[Object(k.jsx)("h1",{children:"Welcome to Sound Track Box "}),Object(k.jsx)("p",{children:"If you already have an account, log in now"}),Object(k.jsx)("div",{className:"d-flex justify-content-center",children:Object(k.jsx)("button",{className:"btn btn-primary align-center",onClick:h,children:"Log in"})}),Object(k.jsx)("p",{children:" if you don't have an account yet, register first"}),Object(k.jsx)("div",{className:"d-flex justify-content-center",children:Object(k.jsx)("button",{className:"btn btn-primary",onClick:b,children:"Register"})}),Object(k.jsx)("br",{}),Object(k.jsx)("p",{children:" ..or play around with the sample track "}),Object(k.jsx)(oe,{currentSongName:"Sample Track",currentSongID:void 0})]})}})})),le=function(){return Object(k.jsxs)("main",{id:"box",className:"container",children:[Object(k.jsxs)(o.a,{children:[Object(k.jsx)("div",{className:"row justify-content-md-center",children:Object(k.jsx)(I,{})}),Object(k.jsxs)(i.c,{children:[Object(k.jsx)(i.a,{path:"/register",children:Object(k.jsx)(B,{})}),Object(k.jsx)(i.a,{path:"/login",children:Object(k.jsx)(z,{})}),Object(k.jsx)(ie,{path:"/"})]})]}),Object(k.jsx)(u.a,{children:"This site uses cookies."})]})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};n(112);c.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(le,{})}),document.getElementById("root")),ue()},55:function(e,t,n){},80:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.a7a94ca4.chunk.js.map