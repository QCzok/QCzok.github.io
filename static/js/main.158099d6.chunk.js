(this["webpackJsonpsound-track-box"]=this["webpackJsonpsound-track-box"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(29),o=n.n(r),c=(n(68),n(11)),l=n(12),i=n(7),d=n(14),u=n(13),h=(n(69),n(31)),p=n(10),j=n(27),b=n(8),g=n(63),m="http://localhost:3001",f="login_access_token",O=n(1);var v=function(e){var t=e.children,n=Object(g.a)(e,["children"]);return Object(O.jsx)(p.a,Object(b.a)(Object(b.a)({},n),{},{render:function(){return localStorage.getItem(f)?t:null}}))},x=n(9),y=n.n(x),C=n(19),w=(n(77),n(18)),S=n.n(w),N=(n(96),n(42)),k=n(62),D=n(25),P=n(15),I=n(50),M=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleDialogOpen=function(){a.setState({open:!0})},a.handleDialogClose=function(){a.setState({open:!1,songName:"",songUrl:""})},a.handleDialogSubmit=function(){a.props.parentCallback(a.state.songName,a.state.selectedFile),a.setState({open:!1,songName:"",songUrl:""})},a.onFileUpload=function(e){a.setState({selectedFile:e.target.files[0]})},a.state={open:!1,songName:"",songUrl:"",selectedFile:null},a.handleNameChange=a.handleNameChange.bind(Object(i.a)(a)),a.handleUrlChange=a.handleUrlChange.bind(Object(i.a)(a)),a.handleDialogOpen=a.handleDialogOpen.bind(Object(i.a)(a)),a.handleDialogClose=a.handleDialogClose.bind(Object(i.a)(a)),a.handleDialogSubmit=a.handleDialogSubmit.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"handleNameChange",value:function(e){this.setState({songName:e.target.value})}},{key:"handleUrlChange",value:function(e){this.setState({songUrl:e.target.value})}},{key:"render",value:function(){return Object(O.jsxs)(s.a.Fragment,{children:[Object(O.jsx)("a",{className:"dropdown-item",onClick:this.handleDialogOpen,children:"Add a song"}),Object(O.jsxs)(P.a,{show:this.state.open,onHide:this.handleDialogClose,animation:!1,children:[Object(O.jsx)(P.a.Header,{closeButton:!0,children:"Upload a Song"}),Object(O.jsx)(P.a.Body,{children:Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{children:"Song name"}),Object(O.jsx)("input",{type:"song-name",className:"form-control",id:"playlist","aria-describedby":"song name",placeholder:"Enter a song name",value:this.state.songName,onChange:this.handleNameChange})]}),Object(O.jsx)(I.a.Group,{children:Object(O.jsx)(I.a.File,{id:"exampleFormControlFile1",label:"Example file input",onChange:this.onFileUpload})})]})}),Object(O.jsx)(P.a.Footer,{children:Object(O.jsx)(D.a,{type:"submit",className:"btn btn-primary",onClick:this.handleDialogSubmit,children:"Submit"})})]})]})}}]),n}(s.a.Component),F=(n(98),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).deleteSong=a.deleteSong.bind(Object(i.a)(a)),a.handleOnClick=a.handleOnClick.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"deleteSong",value:function(){var e=this,t=new j.a;Promise.resolve(this.deleteSongPost(this.props.playlistID,this.props.songID)).then((function(t){return e.props.parentCallback(t)})),t.get("songID")===this.props.songID&&this.props.updateCurrentSong(void 0,void 0)}},{key:"deleteSongPost",value:function(){var e=Object(C.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.post(m+"/media/deleteSong",{playlistID:t,songID:n},{headers:{"auth-token":localStorage.getItem(f)}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleOnClick",value:function(){this.props.updateCurrentSong(this.props.songName,this.props.songID)}},{key:"render",value:function(){return Object(O.jsxs)("section",{id:"song-frame",children:[Object(O.jsxs)("div",{id:"delete-song",className:"nav-item dropdown",children:[Object(O.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-file-music-fill",viewBox:"0 0 16 16",children:Object(O.jsx)("path",{d:"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-.5 4.11v1.8l-2.5.5v5.09c0 .495-.301.883-.662 1.123C7.974 12.866 7.499 13 7 13c-.5 0-.974-.134-1.338-.377-.36-.24-.662-.628-.662-1.123s.301-.883.662-1.123C6.026 10.134 6.501 10 7 10c.356 0 .7.068 1 .196V4.41a1 1 0 0 1 .804-.98l1.5-.3a1 1 0 0 1 1.196.98z"})})}),Object(O.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:Object(O.jsx)("a",{className:"dropdown-item",onClick:this.deleteSong,children:"Delete this song"})})]}),Object(O.jsx)(D.a,{id:"song-item",onClick:this.handleOnClick,children:this.props.songName})]})}}]),n}(s.a.Component)),L=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onSelect=function(e){console.log("the song url is: "+e)},a.state={fetchInProgress:!1},a.handleUpload=a.handleUpload.bind(Object(i.a)(a)),a.deletePlaylist=a.deletePlaylist.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"addSongPost",value:function(){var e=Object(C.a)(y.a.mark((function e(t,n,a,s){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("playlistName",t),r.append("playlistID",n),r.append("songName",a),r.append("track",s),e.abrupt("return",S.a.post(m+"/media/addSong",r,{headers:{"auth-token":localStorage.getItem(f)}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,s){return e.apply(this,arguments)}}()},{key:"deletePlaylistPost",value:function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.post(m+"/media/deletePlaylist",{playlistID:t},{headers:{"auth-token":localStorage.getItem(f)}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpload",value:function(e,t){var n=this;this.setState({fetchInProgress:!0}),Promise.resolve(this.addSongPost(this.props.playlistName,this.props.playlistID,e,t)).then((function(e){return n.props.parentCallback(e)})).then((function(){n.setState({fetchInProgress:!1})}))}},{key:"deletePlaylist",value:function(){var e=this,t=new j.a;Promise.resolve(this.deletePlaylistPost(this.props.playlistID)).then((function(n){e.props.songCollection.map((function(n){n._id===t.get("songID")&&e.props.updateCurrentSong(void 0,void 0)})),e.props.parentCallback(n)}))}},{key:"render",value:function(){var e=this;return this.songs=this.props.songCollection.map((function(t){return Object(O.jsx)(N.a.Collapse,{eventKey:"0",children:Object(O.jsx)(k.a,{children:Object(O.jsx)(F,{playlistID:e.props.playlistID,songName:t.songName,songID:t._id,parentCallback:e.props.parentCallback,updateCurrentSong:e.props.updateCurrentSong})},t._id)},t._id)})),this.state.fetchInProgress?Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("div",{className:"spinner-border",role:"status",children:Object(O.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(N.a,{children:[Object(O.jsxs)("div",{id:"playlistBox",className:"card-header",children:[Object(O.jsxs)("div",{className:"nav-item dropdown",children:[Object(O.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-file-music-fill",viewBox:"0 0 16 16",children:Object(O.jsx)("path",{d:"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-.5 4.11v1.8l-2.5.5v5.09c0 .495-.301.883-.662 1.123C7.974 12.866 7.499 13 7 13c-.5 0-.974-.134-1.338-.377-.36-.24-.662-.628-.662-1.123s.301-.883.662-1.123C6.026 10.134 6.501 10 7 10c.356 0 .7.068 1 .196V4.41a1 1 0 0 1 .804-.98l1.5-.3a1 1 0 0 1 1.196.98z"})})}),Object(O.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:[Object(O.jsx)(M,{id:"add-song",parentCallback:this.handleUpload}),Object(O.jsx)("a",{className:"dropdown-item",onClick:this.deletePlaylist,children:"Delete this playlist"})]})]}),Object(O.jsx)(N.a.Toggle,{id:"playlistItem",as:D.a,variant:"link",eventKey:"0",children:this.props.playlistName})]}),this.songs]})})}}]),n}(s.a.Component),U=(n(99),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={open:!1,playlistName:""},a.handleDialogOpen=a.handleDialogOpen.bind(Object(i.a)(a)),a.handleDialogClose=a.handleDialogClose.bind(Object(i.a)(a)),a.handleNameChange=a.handleNameChange.bind(Object(i.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"handleDialogOpen",value:function(){this.setState({open:!0})}},{key:"handleDialogClose",value:function(){this.setState({open:!1,playlistName:""})}},{key:"handleSubmit",value:function(e){this.props.parentCallback(this.state.playlistName),this.setState({playlistName:"",open:!1}),e.preventDefault()}},{key:"handleNameChange",value:function(e){this.setState({playlistName:e.target.value})}},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsxs)("button",{id:"add-playlist",type:"button",class:"btn btn-outline-dark",onClick:this.handleDialogOpen,children:[Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",className:"bi bi-plus",viewBox:"0 0 16 16",children:Object(O.jsx)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})}),"Add a new playlist"]}),Object(O.jsxs)(P.a,{show:this.state.open,onHide:this.handleDialogClose,animation:!1,children:[Object(O.jsx)(P.a.Header,{closeButton:!0,children:"Add a playlist"}),Object(O.jsx)(P.a.Body,{children:Object(O.jsx)("form",{children:Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{children:"Playlist"}),Object(O.jsx)("input",{type:"playlist",className:"form-control",id:"playlist","aria-describedby":"playlist",placeholder:"Enter playlist name",value:this.state.playlistName,onChange:this.handleNameChange})]})})}),Object(O.jsx)(P.a.Footer,{children:Object(O.jsx)(D.a,{type:"submit",className:"btn btn-primary",onClick:this.handleSubmit,children:"Submit"})})]})]})}}]),n}(s.a.Component)),A=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={playlistCollection:null},a.onChangePlaylists=a.onChangePlaylists.bind(Object(i.a)(a)),a.reloadCollection=a.reloadCollection.bind(Object(i.a)(a)),a.addPlaylistPost=a.addPlaylistPost.bind(Object(i.a)(a)),a.onSongChange=a.onSongChange.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.reloadCollection()}},{key:"onChangePlaylists",value:function(e){var t=this;Promise.resolve().then(this.addPlaylistPost(e).then((function(e){t.setState({playlistCollection:e})})))}},{key:"onSongChange",value:function(e){this.setState({playlistCollection:e})}},{key:"addPlaylistPost",value:function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.post(m+"/media/addPlaylist",{name:t},{headers:{"auth-token":localStorage.getItem(f)}}).then((function(e){if(200===e.status)return e.data.affected})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMusicCollectionGet",value:function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.a.get(m+"/media/loadMusicCollection",{headers:{"auth-token":localStorage.getItem(f)}}).then((function(e){return e.data})).catch((function(e){console.log(e)})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadCollection",value:function(){var e=this;Promise.resolve(this.loadMusicCollectionGet()).then((function(t){e.setState({playlistCollection:t})}))}},{key:"render",value:function(){var e=this;return this.state.playlistCollection?Object(O.jsxs)("section",{className:"library",children:[Object(O.jsx)(U,{parentCallback:this.onChangePlaylists}),Object(O.jsx)("ul",{className:"list-group collection",children:this.state.playlistCollection.musicCollection.map((function(t,n){return Object(O.jsx)("li",{id:"frame",className:"list-group-item",children:Object(O.jsx)(L,{playlistName:t.name,playlistID:t._id,songCollection:t.songList?t.songList:[],parentCallback:e.onSongChange,updateCurrentSong:e.props.updateCurrentSong})},n)}))})]}):Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("div",{className:"spinner-border",role:"status",children:Object(O.jsx)("span",{className:"sr-only",children:"Loading..."})})})}}]),n}(s.a.Component),H=n(32),B=n(41);var E=Object(p.f)((function(e){var t=Object(a.useState)({email:"",password:"",confirmPassword:"",errorMessage:null,successMessage:null,onSend:!1}),n=Object(B.a)(t,2),s=n[0],r=n[1],o=function(e){var t=e.target,n=t.id,a=t.value;r((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(H.a)({},n,a))}))},c=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.email.length&&s.password.length?(t={email:s.email,password:s.password},S.a.post(m+"/user/register",t).then((function(e){200===e.status?r((function(e){return Object(b.a)(Object(b.a)({},e),{},{successMessage:"You have successfully registered. Please check your mail and verify your account.",errorMessage:null})})):r((function(t){return Object(b.a)(Object(b.a)({},t),{},{errorMessage:e.data,successMessage:null,onSend:!1})}))})).catch((function(e){r((function(t){return Object(b.a)(Object(b.a)({},t),{},{errorMessage:e.response.data,successMessage:null,onSend:!1})}))}))):r((function(e){return Object(b.a)(Object(b.a)({},e),{},{errorMessage:"Please enter valid username and password",successMessage:null})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){e.history.push("/home")};return Object(O.jsx)("div",{children:Object(O.jsxs)(P.a,{show:!0,onHide:function(){return l()},animation:!1,children:[Object(O.jsx)(P.a.Header,{closeButton:!0,children:"Register"}),Object(O.jsx)(P.a.Body,{children:Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(O.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:s.email,onChange:o}),Object(O.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:s.password,onChange:o})]}),Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Confirm Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password",value:s.confirmPassword,onChange:o})]}),Object(O.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){e.preventDefault(),s.password===s.confirmPassword?(r((function(e){return Object(b.a)(Object(b.a)({},e),{},{onSend:!0})})),Promise.resolve().then(c).catch((function(e){return console.log(e)}))):r((function(e){return Object(b.a)(Object(b.a)({},e),{},{errorMessage:"Passwords do not match"})}))},disabled:s.onSend?"true":"",children:"Register"})]})}),Object(O.jsxs)(P.a.Footer,{children:[Object(O.jsxs)("div",{className:"mt-2",children:[Object(O.jsx)("span",{children:"Already have an account? "}),Object(O.jsx)("button",{className:"btn btn-primary",onClick:function(){e.history.push("/login")},children:"Login here"})]}),Object(O.jsx)("section",{class:s.errorMessage?"alert alert-danger":"",role:"alert",children:s.errorMessage}),Object(O.jsx)("section",{class:s.successMessage?"alert alert-success":"",role:"alert",children:s.successMessage})]})]})})}));var T=Object(p.f)((function(e){var t=Object(a.useState)({email:"",password:"",successMessage:null,errorMessage:null}),n=Object(B.a)(t,2),s=n[0],r=n[1],o=function(e){var t=e.target,n=t.id,a=t.value;r((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(H.a)({},n,a))}))},c=function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.post(m+"/user/login",t).then((function(e){e.status<400?(r((function(e){return Object(b.a)(Object(b.a)({},e),{},{successMessage:"Login successful. Redirecting to home page.."})})),localStorage.setItem(f,e.data),l()):r((function(t){return Object(b.a)(Object(b.a)({},t),{},{errorMessage:e.data})}))})).catch((function(e){e.response?r((function(t){return Object(b.a)(Object(b.a)({},t),{},{errorMessage:e.response.data})})):alert("NETWORK ERROR")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){e.history.push("/")};return Object(O.jsxs)(P.a,{show:!0,onHide:function(){return l()},animation:!1,children:[Object(O.jsx)(P.a.Header,{closeButton:!0,children:"Login"}),Object(O.jsxs)(P.a.Body,{children:[Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{children:"Email address"}),Object(O.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:s.email,onChange:o})]}),Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:s.password,onChange:o})]}),Object(O.jsx)("div",{className:"form-check"})]}),Object(O.jsx)(D.a,{type:"submit",className:"btn btn-primary",onClick:function(e){e.preventDefault();var t={email:s.email,password:s.password};Promise.resolve(c(t)).catch((function(e){return console.log(e)}))},children:"Submit"})]}),Object(O.jsxs)(P.a.Footer,{children:[Object(O.jsxs)("section",{className:"registerMessage",children:[Object(O.jsx)("span",{children:"Dont have an account? "}),Object(O.jsx)("button",{className:"btn btn-primary",onClick:function(){e.history.push("/register")},children:"Register"})]}),Object(O.jsx)("section",{class:s.errorMessage?"alert alert-danger":"",role:"alert",children:s.errorMessage})]})]})})),q=(n(100),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).openMenu=function(e){a.setState({anchorEl:e.currentTarget,isOpen:!0})},a.closeMenu=function(){a.setState({anchorEl:null,isOpen:!1}),a.state.isLoggedIn&&a.props.history.push("/login")},a.state={anchorEl:null|HTMLElement,isOpen:!1},a.onSelection=a.onSelection.bind(Object(i.a)(a)),a.myRef=s.a.createRef(),a.onAccountDeletion=a.onAccountDeletion.bind(Object(i.a)(a)),a.deleteUser=a.deleteUser.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"onSelection",value:function(){this.setState({anchorEl:null,isOpen:!1}),localStorage.getItem(f)?(localStorage.removeItem(f),this.props.history.push("/")):this.props.history.push("/login")}},{key:"onAccountDeletion",value:function(){Promise.resolve(this.deleteUser(this.props.playlistID)).then((function(){localStorage.removeItem(f);var e=new j.a;e.remove("songName",{path:"/",secure:!0}),e.remove("songID",{path:"/",secure:!0}),window.location.reload()}))}},{key:"deleteUser",value:function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.post(m+"/user/deleteUser",{},{headers:{"auth-token":localStorage.getItem(f)}}).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(O.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(O.jsx)("ul",{className:"navbar-nav",children:Object(O.jsxs)("li",{className:"nav-item dropdown",children:[Object(O.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:localStorage.getItem(f)?"orange":"currentColor",className:"bi bi-file-person-fill",viewBox:"0 0 16 16",children:Object(O.jsx)("path",{d:"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-1 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 4c2.623 0 4.146.826 5 1.755V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-1.245C3.854 11.825 5.377 11 8 11z"})})}),Object(O.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:[Object(O.jsx)("a",{className:"dropdown-item",onClick:this.onSelection,children:localStorage.getItem(f)?"Logout":"Login"}),Object(O.jsx)("a",{className:localStorage.getItem(f)?"dropdown-item":"",onClick:this.onAccountDeletion,href:"#",children:localStorage.getItem(f)?"Delete account":""})]})]})})}),Object(O.jsx)("p",{id:"app-name",children:"Sound Track Box"})]})}}]),n}(s.a.Component)),z=Object(p.f)(q),R=(n(101),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onAudioLoad=function(){try{var e=new AudioContext,t=document.getElementById("track"),n=e.createMediaElementSource(t);a.analyserNode=e.createAnalyser(),a.analyserNode.fftSize=1024,a.bufferLength=a.analyserNode.frequencyBinCount,a.dataArray=new Float32Array(a.bufferLength),n.connect(a.analyserNode),a.analyserNode.connect(e.destination)}catch(s){}},a.onTimeUpdateHandler=function(){try{requestAnimationFrame(a.onTimeUpdateHandler),a.analyserNode.getFloatFrequencyData(a.dataArray),a.canvasCtx.fillStyle="rgb(255, 255, 255)",a.canvasCtx.fillRect(0,0,a.canvas.width,a.canvas.height);for(var e=a.canvas.width/a.bufferLength*2.5,t=0,n=0;n<a.bufferLength;n++){var s=2*(a.dataArray[n]+140);a.canvasCtx.fillStyle="rgb(52 , 58, 74)",a.canvasCtx.fillRect(t,a.canvas.height-s/2,e,s/2),t+=e+1}}catch(r){}},a.state={open:!1},a.analyserNode=null,a.dataArray=null,a.bufferLength=null,a.onTimeUpdateHandler=a.onTimeUpdateHandler.bind(Object(i.a)(a)),a.onAudioLoad=a.onAudioLoad.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.canvas=document.getElementById("visualizer"),this.canvasCtx=this.canvas.getContext("2d"),this.onAudioLoad(),this.onTimeUpdateHandler()}},{key:"render",value:function(){return this.props.currentSongID?Object(O.jsxs)("div",{className:"player",children:[Object(O.jsx)("figcaption",{id:"caption",children:this.props.currentSongName}),Object(O.jsxs)("audio",{id:"track",controls:!0,crossorigin:"anonymous",src:m+"/media/getSongFile?songID="+this.props.currentSongID,children:["Your browser does not support the",Object(O.jsx)("code",{children:"audio"})," element."]})]}):Object(O.jsxs)("div",{className:"player",children:[Object(O.jsx)("figcaption",{id:"caption",children:"Test Song"}),Object(O.jsxs)("audio",{id:"track",controls:!0,crossorigin:"anonymous",src:"https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_700KB.mp3",children:["Your browser does not support the",Object(O.jsx)("code",{children:"audio"})," element."]})]})}}]),n}(s.a.Component)),_=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(c.a)(this,n),a=t.call(this,e);var s=new j.a;return a.state={currentSongName:s.get("songName"),currentSongID:s.get("songID")},a.updateCurrentSong=a.updateCurrentSong.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"updateCurrentSong",value:function(e,t){var n=new j.a;this.setState({currentSongName:e,currentSongID:t}),t?(n.set("songName",e,{path:"/",secure:!0}),n.set("songID",t,{path:"/",secure:!0})):(n.remove("songName",e,{path:"/",secure:!0}),n.remove("songID",t,{path:"/",secure:!0}))}},{key:"render",value:function(){return Object(O.jsx)(h.a,{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(z,{}),Object(O.jsxs)(p.c,{children:[Object(O.jsx)(p.a,{path:"/register",children:Object(O.jsx)(E,{})}),Object(O.jsx)(p.a,{path:"/login",children:Object(O.jsx)(T,{})}),Object(O.jsxs)(v,{path:"/",children:[Object(O.jsx)(A,{updateCurrentSong:this.updateCurrentSong}),Object(O.jsx)(R,{currentSongName:this.state.currentSongName,currentSongID:this.state.currentSongID,changedFrequencyCallback:this.props.setCurrentFrequency})]})]})]})})}}]),n}(s.a.Component),V=(n(102),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsx)("canvas",{id:"visualizer"})}}]),n}(s.a.Component)),K=n(61),G=n.n(K),Y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={currentFrequence:1},a.setCurrentFrequency=a.setCurrentFrequency.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"setCurrentFrequency",value:function(e){this.setState({currentFrequence:e})}},{key:"render",value:function(){return Object(O.jsxs)("main",{className:"main",children:[Object(O.jsxs)("section",{className:"visualizer",children:[Object(O.jsx)(G.a,{children:"This site uses cookies."}),Object(O.jsx)(V,{})]}),Object(O.jsx)("section",{className:"media-player",children:Object(O.jsx)(_,{changedFrequencyCallback:this.setCurrentFrequency})})]})}}]),n}(s.a.Component),J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),r(e),o(e)}))};n(103);o.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(Y,{})}),document.getElementById("root")),J()},68:function(e,t,n){},69:function(e,t,n){},77:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.158099d6.chunk.js.map